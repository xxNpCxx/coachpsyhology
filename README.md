# Telegram Bot для теста архетипов

Telegram-бот на Node.js с использованием Telegraf.js для проведения теста из 84 утверждений, определяющего 4 наиболее выраженных архетипа личности.

## Функциональность

- ✅ Тест из 84 утверждений
- ✅ 12 архетипов (по 7 вопросов на каждый)
- ✅ Шкала ответов 0-3 балла
- ✅ Inline-кнопки для ответов
- ✅ Подсчет баллов по архетипам
- ✅ Вывод топ-4 архетипов с процентами
- ✅ Хранение состояния в памяти
- ✅ Готовность к деплою на Render

## Установка и настройка

### 1. Клонирование и установка зависимостей

```bash
npm install
```

### 2. Настройка переменных окружения

Создайте файл `.env` на основе `env.example`:

```bash
cp env.example .env
```

Добавьте в `.env` ваш токен бота:

```
BOT_TOKEN=your_telegram_bot_token_here
```

### 3. Создание бота в Telegram

1. Найдите @BotFather в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен в `.env` файл

### 4. Подготовка вопросов

Отредактируйте файл `questions.json`, добавив 12 архетипов с вопросами в формате:

```json
{
  "Название архетипа 1": [
    "Вопрос 1 для архетипа 1",
    "Вопрос 2 для архетипа 1",
    "Вопрос 3 для архетипа 1",
    "Вопрос 4 для архетипа 1",
    "Вопрос 5 для архетипа 1",
    "Вопрос 6 для архетипа 1",
    "Вопрос 7 для архетипа 1"
  ],
  "Название архетипа 2": [
    "Вопрос 1 для архетипа 2",
    "Вопрос 2 для архетипа 2",
    "Вопрос 3 для архетипа 2",
    "Вопрос 4 для архетипа 2",
    "Вопрос 5 для архетипа 2",
    "Вопрос 6 для архетипа 2",
    "Вопрос 7 для архетипа 2"
  ]
}
```

**Структура архетипов:**
- 12 архетипов как ключи объекта
- Каждый архетип содержит массив из 7 вопросов
- Всего 84 вопроса (12 × 7)

### 5. Запуск бота

**Локально:**
```bash
npm start
```

**Для разработки (с автоперезагрузкой):**
```bash
npm run dev
```

## Деплой на Render

1. Создайте аккаунт на [Render.com](https://render.com)
2. Создайте новый Web Service
3. Подключите ваш GitHub репозиторий
4. Настройте переменные окружения:
   - `BOT_TOKEN`: ваш токен бота
5. Установите команду запуска: `npm start`
6. Деплойте!

## Использование

1. Найдите вашего бота в Telegram
2. Отправьте команду `/start`
3. Отвечайте на вопросы, выбирая 0, 1, 2 или 3
4. Получите результаты с топ-4 архетипами

## Структура проекта

```
├── index.js          # Основная логика бота
├── questions.json    # Вопросы теста (архетипы -> вопросы[])
├── package.json      # Зависимости и скрипты
├── env.example       # Пример переменных окружения
└── README.md         # Документация
```

## Технические детали

- **Фреймворк:** Telegraf.js
- **Хранение данных:** Map в оперативной памяти
- **Деплой:** Готов к Render без webhook
- **Обработка ошибок:** Graceful shutdown
- **Модульность:** Чистый, понятный код
- **Структура данных:** Объект с архетипами как ключами

## Поддержка

При возникновении проблем:
1. Проверьте правильность токена бота
2. Убедитесь, что `questions.json` содержит валидный JSON
3. Проверьте логи в консоли
4. Убедитесь, что все 12 архетипов имеют по 7 вопросов # coachpsyhology
